<link rel="stylesheet" href="/css/chat.css">
<script src="/socket.io/socket.io.js"></script>
<script src="/js/main.js"></script>

<div class="container-chat">
  <div class="panel panel-left col-md-4">
    <h4>Buscar Amigos</h4>
    {{!-- <form class="form-inline" id="searchForm">
      <input class="form-control mr-sm-2" type="search" id="searchInput" placeholder="Buscar" aria-label="Search">
      <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
    </form> --}}
    <ul id="usersList">
      {{#each users}}
      <li data-id="{{this._id}}" class="user-item">
        <div>
          <img src="{{this.profilePicture}}" width="30px" height="30px" class="rounded-circle" alt="{{this.nombre}}">
          {{this.nombre}}
        </div>
      </li>
      {{/each}}
    </ul>
  </div>

  <div class="panel col-md-6">
    <div id="chat-container">
      {{#if selectedUser}}
      <div id="personal-chat">
        <h2>Chat con {{selectedUser.nombre}}</h2>
        <input type="hidden" id="selectedUserId" value="{{selectedUser._id}}">
        <input type="hidden" id="currentUserId" value="{{user._id}}">
        <div id="messages">
          {{#each messages}}
          <div class="message" data-sender-id="{{this.sender}}">
            <p>{{this.text}}</p>
          </div>
          {{/each}}
        </div>
        <form class="form-inline" id="send-message-form">
          <input type="text" id="message-input" placeholder="Escribe un mensaje...">
          <button type="submit"><i class="fas fa-paper-plane"></i></button>
        </form>
      </div>
      {{else}}
      <img src="/img/chat.jpg" width="100%" height="100%" alt="Selecciona un usuario para chatear">
      {{/if}}
    </div>

  </div>
</div>